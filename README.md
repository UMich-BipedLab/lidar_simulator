# lidar_simulator

## Overview
This is a LiDAR simulator package for spinning LiDARs and solid-state LiDARs, described in paper: **3D LiDAR Intrinsic Calibration and Automatic System for LiDAR to Camera Calibration** ([PDF](https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/AutomaticCalibration.pdf)). More detail will be added soon.

**Author: Bruce JK Huang
Maintainer: Bruce JK Huang, bjhuang@umich.edu  
Affiliation: The Biped Lab, the University of Michigan**

This package has been tested under MATLAB2019a and Ubuntu 16.04.
**[Issues]**
If you encounter _any_ issues, I would be happy to help. If you cannot find a related one in the existing issues, please open a new one. I will try my best to help! 


## Abstract
Periodic intrinsic and extrinsic (re-)calibrations are essential for modern perception and navigation systems deployed on autonomous robots. To date, intrinsic calibration models for LiDARs have been based on hypothesized physical mechanisms for how a spinning LiDAR functions, resulting in anywhere from three to ten parameters to be estimated from data. Instead we propose to abstract away from the physics of a LiDAR type (spinning vs solid state, for example) and focus on the spatial geometry of the point cloud generated by the sensor. This leads to a unifying view of calibration. In experimental data, we show that it outperforms physics-based models for a spinning LiDAR. In simulation, we show how this perspective can be applied to a solid state LiDAR. We complete the paper by reporting on an open- source automatic system for target-based extrinsic calibration from a LiDAR to a camera.

## Introduction Video
Please checkout the introduction [video](https://www.brucerobot.com/automatic-calibration). It highlights some importants keypoints in the paper!  

[<img src="https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/figure/IntroVideo.png" width="960">](https://www.brucerobot.com/automatic-calibration)


## Results Quick View
### Simulation of a spinning LiDAR (Velodyne LiDAR for example)
<img src="https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/figure/SpinningLiDAR1Target.png" width="960">
<img src="https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/figure/SpinningLiDARNTargets.png" width="960">


### Simulation of a solid-state LiDAR
1. Noise-free:
<img src="https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/figure/SSLiDARNF.png" width="960">
2. Assume the plane of the wafer is slightly warped:
<img src="https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/figure/SSLiDARN.png" width="960">
3. After calibration using the method described in paper: **3D LiDAR Intrinsic Calibration and Automatic System for LiDAR to Camera Calibration** ([PDF](https://github.com/UMich-BipedLab/lidar_simulator))
<img src="https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/figure/SSLiDARCalibrated.png" width="960">


## Calibration Results Quick View
Calibrate two types of LiDARs in the simulator using the method described in paper: **3D LiDAR Intrinsic Calibration and Automatic System for LiDAR to Camera Calibration** ([PDF](https://github.com/UMich-BipedLab/lidar_simulator/blob/release_v1/AutomaticCalibration.pdf))

### Induce 3-parameter perturbation model (N1),  6-parameter perturbation model (N2), and Sim(3) noise model (N3) for a spinning LiDAR in the [simulator](https://github.com/UMich-BipedLab/lidar_simulator).
<img src="https://github.com/UMich-BipedLab/LiDAR_intrinsic_calibration/blob/release_v1/figure/SimulationSpinning.png" width="960">

### Geometric uncertainty of a solid-state LiDAR by assuming the plane of the wafer is slightly warped.
<img src="https://github.com/UMich-BipedLab/LiDAR_intrinsic_calibration/blob/release_v1/figure/SimulationSSLiDAR.png" width="960">


## Required packages
Please download _matlab_utils_ from [here](https://github.com/UMich-BipedLab/matlab_utils).  
Please download _LiDAR_intrinsic_calibration_ from [here](https://github.com/UMich-BipedLab/LiDAR_intrinsic_calibration).  


## Usage
To test the simulator for a spinning lidar, run _main_spinning_lidar.m_  
To test the simulator for a solid state lidar, run _main_solid_state_lidar.m_


## Citations
The detail is described in: 
Jiunn-Kai Huang, Chenxi Feng, Madhav Achar, Maani Ghaffari, and Jessy W. Grizzle, "3D LiDAR Intrinsic Calibration and Automatic System for LiDAR to Camera Calibration" ([PDF](https://github.com/UMich-BipedLab/automatic_lidar_camera_calibration/blob/release_v1/AutomaticCalibration.pdf))(arXiv will appear soon))

<!--
```
@article{huang2019improvements,
  title={Improvements to Target-Based 3D LiDAR to Camera Calibration},
  author={Huang, Jiunn-Kai and Grizzle, Jessy W},
  journal={arXiv preprint arXiv:1910.03126},
  year={2019}
}
```
-->
